<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.tfg.dashboard_tfg.viewmodel.DockerViewModel"
            prefHeight="860.0" prefWidth="800.0">

    <VBox spacing="10.0"
          AnchorPane.bottomAnchor="20.0"
          AnchorPane.leftAnchor="20.0"
          AnchorPane.rightAnchor="20.0"
          AnchorPane.topAnchor="20.0"
          style="-fx-border-width: 1;
                 -fx-padding: 20 20 20 20;"
          styleClass="view">

        <HBox alignment="CENTER_LEFT" spacing="5.0" >
            <Label text="Docker Manager" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Refresh Containers" onAction="#refreshContainers" styleClass="console-button"/>
            <ToggleButton fx:id="autoRefreshToggle" text="Auto Refresh" onAction="#toggleAutoRefresh" styleClass=" console-button"/>
        </HBox>

        <TitledPane text="Remote Connection" styleClass="titled-pane, remote-connection-pane">
            <GridPane fx:id="connectionPane" hgap="10" vgap="5" styleClass="connection-grid">
                <Label text="Server Host:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="connection-label"/>
                <TextField fx:id="serverHostField" GridPane.columnIndex="1" GridPane.rowIndex="0" promptText="e.g., localhost or IP address" styleClass="connection-input"/>

                <Label text="Server Port:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="connection-label"/>
                <TextField fx:id="serverPortField" GridPane.columnIndex="1" GridPane.rowIndex="1" promptText="e.g., 22 or 2375" styleClass="connection-input"/>

                <Label text="Username:" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="connection-label"/>
                <TextField fx:id="usernameField" GridPane.columnIndex="1" GridPane.rowIndex="2" promptText="Username for SSH" styleClass="connection-input"/>

                <Label text="Password:" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="connection-label"/>
                <PasswordField fx:id="passwordField" GridPane.columnIndex="1" GridPane.rowIndex="3" promptText="Password for SSH" styleClass="connection-input"/>

                <Label text="Connection Type:" GridPane.columnIndex="0" GridPane.rowIndex="4" styleClass="connection-label"/>
                <HBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="4" alignment="CENTER_LEFT">
                    <RadioButton fx:id="sshRadio" text="SSH" toggleGroup="$connectionTypeGroup" selected="true" styleClass="connection-radio"/>
                    <RadioButton fx:id="apiRadio" text="API" toggleGroup="$connectionTypeGroup" styleClass="connection-radio"/>
                </HBox>

                <Button fx:id="connectButton" text="Connect" GridPane.columnIndex="1" GridPane.rowIndex="5" onAction="#connectToServer" styleClass="console-button, connect-button"/>

                <Label fx:id="connectionStatusLabel" text="Not Connected" GridPane.columnIndex="0" GridPane.rowIndex="6" GridPane.columnSpan="2" styleClass="status-label"/>
            </GridPane>
        </TitledPane>

        <TitledPane text="Container Monitoring" styleClass="titled-pane, container-monitoring-pane">
            <VBox spacing="5" styleClass="monitoring-container">
                <HBox spacing="5" alignment="CENTER_LEFT" styleClass="monitoring-toolbar">
                    <Label text="Container Monitoring" styleClass="monitoring-title"/>
                    <Region HBox.hgrow="ALWAYS" />
                    <StackPane styleClass="filter-container">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="Filter:" styleClass="filter-label"/>
                            <ComboBox fx:id="containerFilter" promptText="All Containers" prefWidth="150.0"
                                      onAction="#applyContainerFilter" styleClass="filter-combo">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="All Containers" />
                                        <String fx:value="Running Only" />
                                        <String fx:value="Stopped Only" />
                                    </FXCollections>
                                </items>
                            </ComboBox>
                        </HBox>
                    </StackPane>
                    <HBox spacing="3" alignment="CENTER" styleClass="container-count">
                        <Label text="Containers:" styleClass="count-label"/>
                        <Label fx:id="containerCountLabel" text="0" styleClass="count-value"/>
                    </HBox>
                </HBox>

                <Label text="Scroll on tiles to cycle through metrics" styleClass="help-text"/>

                <ScrollPane fitToWidth="true" prefHeight="300.0" styleClass="container-scroll">
                    <FlowPane fx:id="containerTilesPane" hgap="10" vgap="10" styleClass="tiles-pane"
                              prefWidth="Infinity" maxWidth="Infinity">
                        <padding><Insets top="3" right="3" bottom="3" left="3"/></padding>
                    </FlowPane>
                </ScrollPane>
            </VBox>
        </TitledPane>

        <TitledPane text="Docker Terminal" VBox.vgrow="ALWAYS" styleClass="titled-pane, docker-terminal-pane">
            <VBox spacing="15" styleClass="terminal-container">
                <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="terminal-toolbar">
                    <Label text="Docker Terminal" styleClass="terminal-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Clear Output" onAction="#clearTerminal" styleClass="console-button"/>
                </HBox>

                <TextArea fx:id="cliOutput" prefHeight="250.0" wrapText="true" editable="false"
                          styleClass="command-prompt, terminal-output" VBox.vgrow="ALWAYS"/>

                <HBox spacing="10.0" alignment="CENTER_LEFT" styleClass="command-input-container">
                    <Label text="\$" styleClass="prompt-symbol"/>
                    <TextField fx:id="cliInput" HBox.hgrow="ALWAYS" prefHeight="40.0"
                               promptText="Enter docker command..." styleClass="input-prompt, terminal-input"/>
                    <Button text="Execute" prefHeight="40.0" onAction="#executeCommand"
                            styleClass="console-button, execute-button"/>
                </HBox>

                <HBox spacing="5.0" alignment="CENTER_LEFT" styleClass="history-container">
                    <Label text="History:" styleClass="history-label"/>
                    <ComboBox fx:id="commandHistory" prefWidth="400.0" styleClass="history-box" />
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="statusLabel" text="Ready" styleClass="status-label"/>
                </HBox>
            </VBox>
        </TitledPane>
    </VBox>
</AnchorPane>