<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.tfg.dashboard_tfg.viewmodel.DockerViewModel"
            prefHeight="600.0" prefWidth="800.0">

    <VBox spacing="15.0"
          AnchorPane.bottomAnchor="20.0"
          AnchorPane.leftAnchor="20.0"
          AnchorPane.rightAnchor="20.0"
          AnchorPane.topAnchor="20.0"
          style="-fx-border-width: 1;
                 -fx-padding: 20 40 0 40;"
          styleClass="view">

        <HBox alignment="CENTER_LEFT" spacing="10.0" >
            <Label text="Docker Manager" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Refresh Containers" onAction="#refreshContainers" styleClass="action-button"/>
            <ToggleButton fx:id="autoRefreshToggle" text="Auto Refresh" onAction="#toggleAutoRefresh" styleClass="action-button"/>
        </HBox>

        <!-- Container Tiles Section -->
        <TitledPane text="Container Monitoring">
            <VBox spacing="10">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Filter:" />
                    <ComboBox fx:id="containerFilter" promptText="All Containers" prefWidth="150.0" onAction="#applyContainerFilter">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="All Containers" />
                                <String fx:value="Running Only" />
                                <String fx:value="Stopped Only" />
                            </FXCollections>
                        </items>
                    </ComboBox>
                    <Region HBox.hgrow="ALWAYS" />
                    <Label text="Containers:" />
                    <Label fx:id="containerCountLabel" text="0" style="-fx-font-weight: bold;" />
                    <Label text="Scroll on tiles to cycle through metrics" />
                </HBox>

                <ScrollPane fitToWidth="true" prefHeight="180.0" styleClass="container-scroll">
                    <FlowPane fx:id="containerTilesPane" hgap="10" vgap="10">
                        <padding><Insets top="5" right="5" bottom="5" left="5"/></padding>
                    </FlowPane>
                </ScrollPane>
            </VBox>
        </TitledPane>

        <!-- Docker Terminal Section -->
        <TitledPane text="Docker Terminal" VBox.vgrow="ALWAYS" style="-fx-padding: 0 0 20 0;" >
            <VBox spacing="10">
                <HBox alignment="CENTER_LEFT" spacing="10.0">
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Clear Output" onAction="#clearTerminal" styleClass="console-button"/>
                </HBox>

                <TextArea fx:id="cliOutput" prefHeight="250.0" wrapText="true" editable="false"
                          style="-fx-font-weight:bold;" styleClass="command-prompt" VBox.vgrow="ALWAYS"/>

                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <Label text="\$" />
                    <TextField fx:id="cliInput" HBox.hgrow="ALWAYS" prefHeight="40.0"
                               promptText="Enter docker command..." styleClass="input-prompt"/>
                    <Button text="Execute Command" prefHeight="40.0" onAction="#executeCommand"
                            styleClass="console-button"/>
                </HBox>

                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <Label text="History:"/>
                    <ComboBox fx:id="commandHistory" prefWidth="400.0" styleClass="history-box"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="statusLabel" text="Ready" styleClass="status-label"/>
                </HBox>
            </VBox>
        </TitledPane>
    </VBox>
</AnchorPane>
